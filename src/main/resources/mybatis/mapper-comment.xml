<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.jk.mapper.CommentMapper">

    <select id="queryComment" resultType="Comment">

        SELECT
			yc.*, ycr.replyContent replyContent,
			tmua.yh_tx yhTx,
			tmua.yh_mch yhMch
		from y_comment yc LEFT JOIN	t_mall_user_account tmua on  yc.userId=tmua.Id
          LEFT JOIN	y_commentreply ycr on yc.userId=ycr.toReplyId and yc.id=ycr.id
        AND hotPointId = #{hotPointId} and yc.state=1 order by yc.createTime desc
    </select>

    <insert id="addComment">
        insert into y_comment(hotPointId,userId,userContent,state,praseCount,createTime,updateTime)
            values(#{comment.hotPointId},#{id},#{comment.userContent},0,0,now(),now())
    </insert>


</mapper>